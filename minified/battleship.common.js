function Ship(a,b){this.length=b,this.type=a,this.initialize()}function Fleet(){this.ships={},this.ships.CARRIER=new Ship(Fleet.CARRIER,5),this.ships.BATTLESHIP=new Ship(Fleet.BATTLESHIP,4),this.ships.DESTROYER=new Ship(Fleet.DESTROYER,3),this.ships.SUBMARINE=new Ship(Fleet.SUBMARINE,3),this.ships.PATROLBOAT=new Ship(Fleet.PATROLBOAT,2)}function Grid(){this.fleet=new Fleet,this.initialize()}function Cell(){this.temperature=0,this.state=Cell.TYPE_EMPTY,this.ship=null}Ship.prototype.initialize=function(){this.damage=0,this.isSunk=!1,this.isUsed=!1,this.location={x:null,y:null,direction:null},this.cells=[]},Ship.prototype.hit=function(){++this.damage===this.length&&(this.isSunk=!0)},Ship.HORIZONTAL=0,Ship.VERTICAL=1,Fleet.prototype.initialize=function(){this.ships.CARRIER.initialize(),this.ships.BATTLESHIP.initialize(),this.ships.DESTROYER.initialize(),this.ships.SUBMARINE.initialize(),this.ships.PATROLBOAT.initialize()},Fleet.prototype.isPlaced=function(){return!!(this.ships.CARRIER.isUsed&&this.ships.BATTLESHIP.isUsed&&this.ships.DESTROYER.isUsed&&this.ships.SUBMARINE.isUsed&&this.ships.PATROLBOAT.isUsed)},Fleet.prototype.isSunk=function(){return!!(this.ships.CARRIER.isSunk&&this.ships.BATTLESHIP.isSunk&&this.ships.DESTROYER.isSunk&&this.ships.SUBMARINE.isSunk&&this.ships.PATROLBOAT.isSunk)},Fleet.prototype.getShipByType=function(a){switch(a){case Fleet.CARRIER:return this.ships.CARRIER;case Fleet.BATTLESHIP:return this.ships.BATTLESHIP;case Fleet.DESTROYER:return this.ships.DESTROYER;case Fleet.SUBMARINE:return this.ships.SUBMARINE;case Fleet.PATROLBOAT:return this.ships.PATROLBOAT;default:return null}},Fleet.prototype.hasMoved=function(a){var b=!1;for(var c in this.ships)if({}.hasOwnProperty.call(this.ships,c)&&{}.hasOwnProperty.call(a,c)){var d=a[c].location,e=this.ships[c].location;if(d.x!==e.x&&d.y!==e.y&&d.direction!==e.direction){b=!0;break}}return b},Fleet.CARRIER=0,Fleet.BATTLESHIP=1,Fleet.DESTROYER=2,Fleet.SUBMARINE=3,Fleet.PATROLBOAT=4,Grid.prototype.initialize=function(){this.fleet.initialize(),this.create()},Grid.prototype.create=function(){this.cells=[];for(var a=0;a<10;++a){this.cells[a]=[];for(var b=0;b<10;++b)this.cells[a].push(new Cell)}},Grid.prototype.getCell=function(a,b){var c=a>9||a<0||b>9||b<0;return c?null:this.cells[a][b]},Grid.prototype.dockShip=function(a,b,c,d){var e=this.fleet.getShipByType(d);if(!this.inBounds(a,b,c,e)||this.doesCollide(a,b,c,e)||e.isUsed)return!1;e.isUsed=!0,e.location.x=a,e.location.y=b,e.location.direction=c;for(var f=c===Ship.HORIZONTAL?a:b,g=f;g<f+e.length;++g){var h=this.getCell(c===Ship.HORIZONTAL?g:a,c===Ship.HORIZONTAL?b:g);h.setShip(e),h.state=Cell.TYPE_SHIP,e.cells.push(h)}return!0},Grid.prototype.doesCollide=function(a,b,c,d){for(var e=c===Ship.HORIZONTAL?a:b,f=e;f<e+d.length;++f){var g=this.getCell(c===Ship.HORIZONTAL?f:a,c===Ship.HORIZONTAL?b:f);if(g.state!==Cell.TYPE_EMPTY)return!0}return!1},Grid.prototype.getShipByCoord=function(a,b){return null===this.getCell(a,b)?null:this.getCell(a,b).ship},Grid.prototype.inBounds=function(a,b,c,d){return!(a<0||a>9||b<0||b>9)&&(c===Ship.VERTICAL?b+(d.length-1)<=9:a+(d.length-1)<=9)},Cell.prototype.setShip=function(a){this.ship=a},Cell.TYPE_EMPTY=0,Cell.TYPE_SHIP=1,Cell.TYPE_MISS=2,Cell.TYPE_HIT=3,Cell.TYPE_SUNK=4;